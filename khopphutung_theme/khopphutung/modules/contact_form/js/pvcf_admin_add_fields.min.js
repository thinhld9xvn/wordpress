jQuery(function(a){var b={pvcf_index:0,ready:function(){this.pvcf_index=pvcf_index,a(".pvcf-sortable-fields").sortable({connectWith:".pvcf-sortable-fields",handle:".pvcf-handle-title",placeholder:"pvcf-placeholder ui-corner-all"}).on("sortupdate",this.on_pvcf_sortupdate),a(document).on("click",".pvcf-collapse-box",this.on_collapse_field_box).on("change",".pvcf-field-required-checkbox",this.on_pvcf_field_required_check).on("change",".sl-pvcf-field-type",this.on_pvcf_field_type_change).on("keyup",".pvcf-field-title",this.on_pvcf_field_title_keyup).on("click",".pvcf-button-remove-field",this.on_pvcf_remove_field),a("#pvcf-button-add-fields").click(this.on_pvcf_add_field),a("form").submit(this.on_pvcf_submit_form)},scrollToEndField:function(){a("html, body").animate({scrollTop:a(".pvcf-field:last-child").position().top},200)},on_pvcf_sortupdate:function(b,c){var d=0,e="",f=null;a(".pvcf-field:not(.pvcf-template-field)").each(function(){f=a(this).find("*[name]"),f.each(function(){e=a(this).attr("name"),e=e.replace(/pv\-contact\-form\-field\[\d\]/gi,"pv-contact-form-field["+d+"]"),a(this).attr("name",e)}),d++})},on_collapse_field_box:function(b){a(this).closest(".pvcf-field-box").toggleClass("closed")},on_pvcf_add_field:function(c){var d=a(".pvcf-group-fields"),e=d.find(".pvcf-template-field").clone(),f="";e.removeClass("pvcf-template-field").appendTo(d),a(".pvcf-sortable-fields").sortable("refresh"),f=e.html(),f=f.replace(/\%index/gi,b.pvcf_index),e.html(f),b.pvcf_index++,b.scrollToEndField()},on_pvcf_remove_field:function(c){a(this).closest(".pvcf-field").remove(),b.pvcf_index--},on_pvcf_field_title_keyup:function(b){var c=a(this).closest(".pvcf-field"),d=c.find(".pvcf-field-section-title"),e=d.find(".title"),f=d.find(".type"),g=d.find(".require"),h=c.find(".sl-pvcf-field-type"),i=h.val(),j=h.find('option[value="'+i+'"]').text().trim(),k=c.find(".pvcf-field-required-checkbox"),l=k.prop("checked")?"(*)":"",m=a(this).val(),n="",o="",p="";""!==m?(n=": "+m,""!==l&&(o=l),"null"!==i&&(p="["+j+"]"),e.text(n),g.text(o),f.text(p)):(e.text(""),g.text(""),f.text(""))},on_pvcf_field_required_check:function(b){console.log(a(this).prop("checked")),a(this).closest(".pvcf-field-input").find("input[type=hidden]").val(a(this).prop("checked")),a(this).closest(".pvcf-field").find(".pvcf-field-title").trigger("keyup")},on_pvcf_field_type_change:function(b){var c=a(this).val(),d=a(this).find('option[value="'+c+'"]').text().trim(),e=a(this).closest(".pvcf-field"),f=e.find(".pvcf-field-cg-hidden");f.each(function(){a(this).hasClass(c)?a(this).hasClass("hidden")&&a(this).removeClass("hidden"):a(this).hasClass("hidden")||a(this).addClass("hidden")});var g=a(this).closest(".pvcf-field-input");g.find(".pvcf-field-type-value-hidden").val(c),g.find(".pvcf-field-type-text-hidden").val(d),a(this).closest(".pvcf-field").find(".pvcf-field-title").trigger("keyup")},on_pvcf_submit_form:function(b){var c=a(".pvcf-field-select-cg"),d=null,e=null;c.each(function(){a(this).hasClass("hidden")||(d=a(this).find(".txt-pvcf-select-options"),e=d.next("input[type=hidden]"),e.val(d.val()))})}};b.ready()});