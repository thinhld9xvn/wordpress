jQuery(function(e){var i={pvcf_index:0,ready:function(){this.pvcf_index=pvcf_index,e(".pvcf-sortable-fields").sortable({connectWith:".pvcf-sortable-fields",handle:".pvcf-handle-title",placeholder:"pvcf-placeholder ui-corner-all"}).on("sortupdate",this.on_pvcf_sortupdate),e(document).on("click",".pvcf-collapse-box",this.on_collapse_field_box).on("change",".pvcf-field-required-checkbox",this.on_pvcf_field_required_check).on("change",".sl-pvcf-field-type",this.on_pvcf_field_type_change).on("keyup",".pvcf-field-title",this.on_pvcf_field_title_keyup).on("click",".pvcf-button-remove-field",this.on_pvcf_remove_field),e("#pvcf-button-add-fields").click(this.on_pvcf_add_field),e("form").submit(this.on_pvcf_submit_form)},scrollToEndField:function(){e("html, body").animate({scrollTop:e(".pvcf-field:last-child").position().top},200)},on_pvcf_sortupdate:function(i,t){var f=0,l="";e(".pvcf-field:not(.pvcf-template-field)").each(function(){e(this).find("*[name]").each(function(i,t){l=e(t).attr("name"),l=l.replace(new RegExp("pv-contact-form-field[[0-9]+]","ig"),"pv-contact-form-field["+f+"]"),console.log(l),e(t).attr("name",l)}),f++})},on_collapse_field_box:function(i){e(this).closest(".pvcf-field-box").toggleClass("closed")},on_pvcf_add_field:function(t){var f=e(".pvcf-group-fields"),l=f.find(".pvcf-template-field").clone(),c="";l.removeClass("pvcf-template-field").appendTo(f),e(".pvcf-sortable-fields").sortable("refresh"),c=l.html(),c=c.replace(/\%index/gi,i.pvcf_index),l.html(c),i.pvcf_index++,i.scrollToEndField()},on_pvcf_remove_field:function(t){e(this).closest(".pvcf-field").remove(),i.pvcf_index--},on_pvcf_field_title_keyup:function(i){var t=e(this).closest(".pvcf-field"),f=t.find(".pvcf-field-section-title"),l=f.find(".title"),c=f.find(".type"),n=f.find(".require"),d=t.find(".sl-pvcf-field-type"),o=d.val(),p=d.find('option[value="'+o+'"]').text().trim(),s=t.find(".pvcf-field-required-checkbox"),v=s.prop("checked")?"(*)":"",a=e(this).val(),h="",r="",_="";""!==a?(h=": "+a,""!==v&&(r=v),"null"!==o&&(_="["+p+"]"),l.text(h),n.text(r),c.text(_)):(l.text(""),n.text(""),c.text(""))},on_pvcf_field_required_check:function(i){console.log(e(this).prop("checked")),e(this).closest(".pvcf-field-input").find("input[type=hidden]").val(e(this).prop("checked")),e(this).closest(".pvcf-field").find(".pvcf-field-title").trigger("keyup")},on_pvcf_field_type_change:function(i){var t=e(this).val(),f=e(this).find('option[value="'+t+'"]').text().trim(),l=e(this).closest(".pvcf-field"),c=l.find(".pvcf-field-cg-hidden");c.each(function(){e(this).hasClass(t)?e(this).hasClass("hidden")&&e(this).removeClass("hidden"):e(this).hasClass("hidden")||e(this).addClass("hidden")});var n=e(this).closest(".pvcf-field-input");n.find(".pvcf-field-type-value-hidden").val(t),n.find(".pvcf-field-type-text-hidden").val(f),e(this).closest(".pvcf-field").find(".pvcf-field-title").trigger("keyup")},on_pvcf_submit_form:function(i){var t=e(".pvcf-field-select-cg"),f=null,l=null;t.each(function(){e(this).hasClass("hidden")||(f=e(this).find(".txt-pvcf-select-options"),l=f.next("input[type=hidden]"),l.val(f.val()))})}};i.ready()});